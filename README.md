# Regulatory-research

## Сравнительное моделирование дискретных регуляторов для терморегулирования в Python.

- Кочетков Алексей Алексеевич
- студент, кафедра информационных технологий и систем,
- Владивостокский государственный университет,
- РФ, г.Владивосток
- email: alexseykochetkov23@gmail.com

**Резюме**: В современной техносфере системы с обратной связью играют роль «центральной нервной системы», обеспечивая точность там, где человеческая реакция или простые алгоритмы бессильны. От стабилизации дронов в турбулентном потоке до управления химическими реакторами — везде работают алгоритмы регулирования. Среди них безусловным промышленным стандартом остается ПИД-регулятор. Согласно данным Honeywell, более 97% регуляторов в таких отраслях, как нефтепереработка и целлюлозно-бумажная промышленность, используют именно ПИД-алгоритм.
Данная статья представляет собой комплексный анализ механизмов управления — фундаментальной логики обратной связи. Ключевая цель — раскрыть синергию P, I и D компонентов как инструментов работы с настоящим, прошлым и будущим состоянием системы.

**Ключевые слова**: ПИД-регулятор, обратная связь, замкнутый контур, уставка, переменная процесса, ошибка управления, пропорциональный коэффициент, интегральный коэффициент, дифференциальный коэффициент, установившаяся ошибка, перерегулирование, интегральное насыщение, время нарастания, время установления, подавление возмущений, робастность, терморегулирование, фильтрация сигнала.
 
## Comparative modeling of discrete regulators for thermal control in Python.

- Kochetkov Alexsey Alekseevich
- student, Department of Information Technologies and Systems,
- Vladivostok State University,
- Russian Federation, Vladivostok
- email: alexseykochetkov23@gmail.com

**Abstract**: In the modern technosphere, feedback systems act as the "central nervous system," ensuring precision where human reactions or simple algorithms fall short. From stabilizing drones in turbulent flows to controlling chemical reactors—regulation algorithms are at work everywhere. Among them, the PID controller remains the unconditional industrial standard. According to Honeywell data, over 97% of controllers in industries such as oil refining and pulp and paper use the PID algorithm precisely.
This article presents a comprehensive analysis of control mechanisms — the fundamental logic of feedback. The key goal is to reveal the synergy of the P, I, and D components as tools for working with the system's present, past, and future states.

**Keywords**: PID controller, feedback, closed loop, setpoint, process variable, control error, proportional gain, integral gain, derivative gain, steady-state error, overshoot, integral windup, rise time, settling time, disturbance rejection, robustness, temperature control, signal filtering.
 
**Введение**
Основа стабильности системы — концепция «замкнутого контура». В отличие от разомкнутых систем, которые действуют «вслепую», замкнутый контур постоянно анализирует результат действий. Для описания этого процесса мы используем четыре базовых термина:

- Уставка (Setpoint, SP): Целевое значение, которого мы хотим достичь (например, давление в 5 бар);
- Процессная переменная (Process Variable, PV): Реальный сигнал с датчика в текущий момент;
- Ошибка (Error, e(t)): Математическая разница между целью и реальностью: e(t)=r(t)-y(t), где r(t) – это цель, а y(t) – сигнал в текущий момент времени;
- Управляющее воздействие (u(t)): Команда, посылаемая регулятором на исполнительный механизм (мотор, клапан).

Представьте, что вы стоите на гироскутере. Глаза и вестибулярный аппарат — это датчики (PV), фиксирующие отклонение от вертикали (SP). Мозг — это регулятор, который вычисляет ошибку e(t) и мгновенно дает команду мышцам ног (u(t)) скорректировать положение. Это и есть живой пример обратной связи: действие → замер результата → мгновенная коррекция.

**П-регулятор: Реакция на «Сейчас»**
Пропорциональный коэффициент ($K_p$) — это первая линия обороны. Его работа описывается уравнением: 
$$u(t)=K_p ⋅e(t)$$
где: $u(t)$ — управляющий сигнал (actuator output), подаваемый на исполнительный механизм в момент времени $t$; $e(t)$ — ошибка управления (control error), которая рассчитывается как разность между уставкой и текущим значение; $K_p$ — пропорциональный коэффициент (proportional gain), определяющий реакцию системы на текущую ошибку.

Здесь сила воздействия прямо зависит от величины текущей ошибки.

- Высокий $K_p$ делает систему «агрессивной» и быстрой, но провоцирует опасные колебания. Низкий $K_p$ гарантирует стабильность, но делает систему вялой;

- Стратегическое ограничение: Главный враг П-регулятора — статическая ошибка (Steady-State Error). Он принципиально не может довести систему до идеального нуля, если на объект действует постоянная нагрузка.

П-регулятор подобен жесткости пружины. Чем сильнее ошибка сжимает пружину, тем сильнее она толкает в ответ. Но если на пружину постоянно давит груз, она никогда не вернется в истинную точку «ноль». Именно поэтому круиз-контроль, использующий только П-звено, никогда не удержит ровно 100 км/ч на крутом подъеме — скорость всегда будет чуть ниже.

**И-регулятор: Память о «Прошлом»**
Чтобы устранить статическую ошибку, нам нужно научить систему «помнить» свои неудачи. Интегральная составляющая накапливает ошибку во времени: 
$$u(t) = K_i ∫_0^t e(τ)dτ$$
где: $u(t)$ — управляющий сигнал (actuator output), подаваемый на исполнительный механизм в момент времени $t$; $K_i$ — интегральный коэффициент (integral gain), определяющий скорость устранения накопленной статической ошибки; $∫_0^te(τ)dτ$ — интегральный терм, представляющий собой накопленную сумму (интеграл) прошлых ошибок за всё время работы системы;

Даже если текущее отклонение мизерное, за минуты накопленная сумма станет огромной и заставит регулятор дожать систему до идеала.

Критический риск - Интегральное насыщение (Windup). Если клапан уже открыт на 100%, а ошибка сохраняется (например, затор в трубе), интеграл продолжает расти «в уме». Когда затор исчезнет, регулятор не сразу закроет клапан, так как ему нужно время, чтобы «сбросить» накопленный груз. В химическом производстве это часто приводит к порче целых партий продукта или срабатыванию предохранительных клапанов.

Представьте интеграл как «терпеливого, но злопамятного наставника». Он суммирует каждую секунду вашего опоздания. Чем дольше вы не исправляете маленькую ошибку, тем сильнее растет его давление, пока вы не придете в норму.

**Д-регулятор: Предсказание «Будущего»**
Дифференциальное звено — это тормозная система, работающая на опережение. Она реагирует не на саму ошибку, а на скорость её изменения: 
$$u(t) = K_d \frac{de(t)}{dt}$$
где: $u(t)$ — управляющий сигнал (actuator output), подаваемый на исполнительный механизм в момент времени $t$; $K_d$ — дифференциальный коэффициент (derivative gain), отвечающий за реакцию на скорость изменения ошибки; $\frac{de(t)}{dt}$ — дифференциальный терм, представляющий собой скорость изменения ошибки и позволяющий предсказать её будущее поведение.

Принцип: Если ошибка стремительно сокращается, Д-звено понимает, что мы летим к цели слишком быстро, и начинает тормозить заранее, предотвращая перелет (перерегулирование).

Риски: Главная проблема — шум. Любой «дребезг» в сигнале датчика дифференциал воспринимает как бешеную скорость изменения и выдает хаотичные удары по исполнительным механизмам.

Д-звено — это опытный вратарь. Он не ждет, пока мяч пересечет линию ворот. Он анализирует траекторию и скорость полета, перемещаясь в точку будущего соприкосновения еще до того, как мяч там окажется.

**ПИД-регулятор: Симфония управления**

Когда три компонента работают вместе, мы получаем «золотой стандарт» автоматизации:

$$
u(t) = K_p e(t) + K_i  ∫_0^t e(τ)dτ  + K_d \frac{de(t)}{dt}
$$

где: $u(t)$ — управляющий сигнал (actuator output), подаваемый на исполнительный механизм в момент времени $t$; $e(t)$ — ошибка управления (control error), которая рассчитывается как разность между уставкой и текущим значение; $K_p$ — пропорциональный коэффициент (proportional gain), определяющий реакцию системы на текущую ошибку; $K_i$ — интегральный коэффициент (integral gain), определяющий скорость устранения накопленной статической ошибки; $K_d$ — дифференциальный коэффициент (derivative gain), отвечающий за реакцию на скорость изменения ошибки; $∫_0^t e(τ)dτ$ — интегральный терм, представляющий собой накопленную сумму (интеграл) прошлых ошибок за всё время работы системы; $\frac{de(t)}{dt}$ — дифференциальный терм, представляющий собой скорость изменения ошибки и позволяющий предсказать её будущее поведение.

Это синергия трех сил: P отвечает за настоящее, I исправляет ошибки прошлого, а D прогнозирует будущее.

ПИ-регулятор: Достаточен для 90% задач, таких как управление уровнем в баке или медленные тепловые процессы.
ПИД-регулятор: Необходим в динамичных системах второго порядка (прецизионное движение, стабилизация давления), где важно исключить перерегулирование при сохранении высокой скорости.

**Результаты** 
Для проведения анализа был построен простейший пример работы регуляторов термостата на языке Python. Ниже показаны результаты расчетов регуляторов для: И-регулятора, ПИ-регулятора, ПИД-регулятора.

На Рисунке 1 продемонстрирован интегрирующий регулятор (И-регулятор). Интегрирующий компонент формирует управляющее воздействие на основе накопленной ошибки за прошедшее время. Его основной задачей является полное устранение установившейся ошибки, поскольку воздействие будет расти до тех пор, пока разница между уставкой и текущей температурой не станет равной нулю. Как видно на графике, система достигает заданной температуры, однако процесс характеризуется более медленным установлением цели и склонностью к возникновению колебаний.

![Рисунок 1. График работы И‑регулятора](figure/Pasted%20image%2020260206183252.png)
Рисунок 1. График работы И-регулятора
Figure 1. Schedule of the I-regulator

На рисунке 2 продемонстрирован пропорциональный-интегрирующий регулятор (ПИ-регулятор). ПИ-регулятор объединяет реакцию на текущую ошибку (пропорциональная часть) и накопленный опыт (интегральная часть). Данный тип устройства является наиболее распространенным в промышленности, обеспечивая надежное управление. Пропорциональная составляющая значительно ускоряет реакцию системы, заставляя температуру быстрее стремиться к 80 °C. Однако, согласно теоретическим данным, сочетание этих компонентов часто приводит к перерегулированию (overshoot) — временному превышению целевого значения перед окончательной стабилизацией.

![Рисунок 2. График работы ПИ-регулятора](figure/Pasted%20image%2020260206183305.png)
Рисунок 2. График работы ПИ-регулятора
Figure 2. Schedule of the PI-regulator

На рисунке 3 показан пропорционально-интегрально-дифференцирующий регулятор (ПИД -регулятор). Полный ПИД-регулятор дополнен дифференциальной составляющей, которая прогнозирует будущее поведение системы на основе скорости изменения ошибки. В задачах терморегулирования, обладающих значительной инерцией, дифференциальный компонент действует как «тормоз» или амортизатор, предотвращая резкие скачки. Моделирование показывает, что ПИД-регулятор обеспечивает наиболее качественный переходный процесс: он позволяет использовать более высокие коэффициенты усиления для быстрого прогрева, одновременно демпфируя колебания и минимизируя перерегулирование.

![Рисунок 3. График работы ПИД-регулятора](figure/Pasted%20image%2020260206183313.png)
Рисунок 3. График работы ПИД-регулятора
Figure 3. Schedule of the PID-regulator

На 4 рисунке продемонстрированы все регуляторы в одном графике. Итоговый сравнительный анализ позволяет наглядно оценить вклад каждого компонента в качество терморегулирования.

![Рисунок 4. Сравнительный график всех трех регуляторов](figure/Pasted%20image%2020260206183317.png)
Рисунок 4. Сравнительный график всех трех регуляторов
Figure 4. Comparative drawing of all three regulators

**Обсуждение** 
Как показал эксперимент, графики переходных процессов для ПИ и ПИД-регуляторов практически совпали. Этот результат не является ошибкой моделирования, а напротив, отражает несколько фундаментальных аспектов теории управления.

Достаточность ПИ-регулирования для простых систем: ПИ-регулятор является «золотым стандартом». ПИ-регулятор используется, когда не требуется предельно жесткое управление или когда доминирующая динамика объекта относится к первому порядку (например, простейшие модели нагрева или уровня жидкости в баке). В таких случаях вклад дифференциальной составляющей становится минимальным.

Главная проблема дифференциального компонента — его чрезвычайная чувствительность к шуму измерений. Поскольку симуляция на Python проводилась в идеальных условиях без зашумления сигнала датчика, дифференциатор не вносил искажений, но и не имел высокочастотных отклонений, которые ему пришлось бы демпфировать. 

Тот факт, что ПИ и ПИД отработали почти одинаково, подтверждает тезис. В большинстве практических приложений сложность ПИД-регулятора не всегда оправдана, и ПИ-регулятор обеспечивает требуемое качество управления при большей простоте настройки. Это объясняет, почему большинство промышленных контроллеров в реальности не используют дифференциальную функцию.

**Заключение**
Регуляторы — это не абстрактные формулы из учебника, а стратегический актив, делающий наш мир предсказуемым и безопасным. Понимание физики, стоящей за каждой переменной, превращает вас из оператора в архитектора систем. В эпоху робототехники и частной космонавтики умение «укротить» обратную связь — это базовый инженерный код.

Теория автоматического управления — это не только манипуляции с формулами, но и искусство чувствовать динамику объекта. Понимание того, почему система колеблется или почему она «зависает», не доходя до цели, гораздо ценнее, чем слепой подбор коэффициентов в симуляторе. Переходите к практике, экспериментируйте с реальным «железом» — только через работу с датчиками и моторами рождается настоящий мастер систем управления.
 
**СПИСОК ИСТОЧНИКОВ / REFERENCES**
1. Goodwin, G. C., Graebe, S. F., Salgado, M. E. Classical PID Control (Control System Design, Prentice Hall PTR).
2. Webb, J. W., Reis, R. A. PID Control of Continuous Processes (Programmable Logic Controllers, Fourth Edition, Prentice Hall PTR).
3. Åström, K. J., Hägglund, T. PID Controllers: Theory, Design, and Tuning (3rd ed., 2005). Этот источник считается одним из наиболее полных по данной теме.
4. Mindell, D. Treatment of PID History (2002). Работа посвящена истории развития и возникновения ПИД-технологий.

